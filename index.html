<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Untuk Yang ‚Äî Film Pendek Ulang Tahun</title>
<meta name="description" content="Cinematic birthday: countdown -> intro video -> collage memories -> ending message" />
<!-- GSAP (smooth cinematic animations) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
<style>
  :root{
    --bg:#071025;
    --panel:rgba(255,255,255,0.03);
    --muted:#a8bac7;
    --accent:#9be7ff;
    --warm:#ffb4c6;
    --glass: rgba(255,255,255,0.04);
    --card:#0b1220;
    --text:#eaf6ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#050612 0%,#071029 70%);color:var(--text);-webkit-font-smoothing:antialiased;overflow:hidden}

  /* Stage */
  .stage{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;overflow:hidden}

  /* ============ INTRO CARD (LANDSCAPE) ============ */
  .introWrap{width:88vw;max-width:1400px;height:56vw;max-height:820px;border-radius:16px;padding:36px;background:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.14));box-shadow:0 30px 90px rgba(2,6,23,0.8);border:1px solid rgba(255,255,255,0.03);position:relative}
  .introLeft{display:flex;gap:20px;align-items:center}
  .logo{width:140px;height:140px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--warm));display:flex;align-items:center;justify-content:center;font-weight:800;color:#021027;font-size:40px;flex:0 0 140px;box-shadow:0 16px 50px rgba(0,0,0,0.6)}
  h1.title{font-size:34px;margin:0;letter-spacing:0.2px}
  p.lead{color:#dff6ff;max-width:60%;margin-top:12px;font-size:16px;line-height:1.5}
  .countdownBox{position:absolute;right:28px;bottom:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.2));padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);text-align:center;min-width:110px}
  .countdownBox .num{font-size:28px;font-weight:800;color:var(--accent)}
  .countdownBox .hint{color:var(--muted);font-size:12px;margin-top:4px}

  /* subtle cinematic flicker */
  .filmGlow{position:absolute;inset:0;background-image:radial-gradient(circle at 20% 10%, rgba(155,231,255,0.02), transparent 8%), radial-gradient(circle at 80% 90%, rgba(255,180,198,0.01), transparent 8%);pointer-events:none;border-radius:16px}

  /* ============ VIDEO (FULLSCREEN) ============ */
  #videoSection{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:black;z-index:60}
  #introVideo{width:100%;height:100%;object-fit:cover;display:block}

  /* overlay movie title when video plays (subtle) */
  .vidOverlay{position:absolute;left:6vw;top:6vh;z-index:62;pointer-events:none;opacity:0}
  .vidOverlay h2{margin:0;font-size:26px}
  .vidOverlay p{color:var(--muted);margin-top:6px}

  /* ============ MEMORIES (COLLAGE) ============ */
  #memories{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:50;padding:6vh 6vw}
  .memCard{width:100%;max-width:1280px;height:calc(100vh - 12vh);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.12));border-radius:14px;padding:28px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 90px rgba(2,6,23,0.7);position:relative;overflow:hidden}
  /* define sections grid: we'll create 5 sections; each section is a small collage of 2-3 photos */
  .sections{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:1fr;gap:18px;height:100%}
  .section{background:rgba(2,6,23,0.2);border-radius:12px;padding:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;align-items:stretch;justify-items:stretch;position:relative;overflow:hidden}
  .section .photo{border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#0a0b12;display:flex;align-items:center;justify-content:center}
  .photo img{width:100%;height:100%;object-fit:cover;transition:transform 18s ease}
  .photo .frameBorder{position:absolute;inset:6px;border-radius:8px;border:2px solid rgba(255,255,255,0.025);pointer-events:none}
  /* some sections will span more cols to create interest */
  .section.big{grid-column:span 2;grid-template-columns:repeat(6,1fr)}
  .section.big .photo{grid-column:auto}
  /* overlay caption/narration */
  .narr{position:absolute;left:6%;bottom:6%;background:linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.18));padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);max-width:46%;color:var(--text);backdrop-filter:blur(6px)}
  .narr .lead{font-size:18px;color:#dff6ff;line-height:1.5}
  .narr .sub{font-size:13px;color:var(--muted);margin-top:8px}

  /* ============ FINAL MESSAGE ============ */
  .finalWrap{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:80}
  .finalCard{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18));padding:28px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:780px;text-align:center;backdrop-filter:blur(6px)}
  .finalCard h2{font-size:34px;margin:0;color:var(--accent)}
  .finalCard p{color:var(--muted);margin-top:10px;line-height:1.6}

  /* small UI fallback (Play music) */
  .ui{position:fixed;right:18px;top:18px;z-index:120;display:flex;gap:8px}
  .btn{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:var(--muted);font-size:13px;cursor:pointer}

  /* responsive tweaks */
  @media (max-width:1000px){
    .introWrap{height:66vw}
    .sections{grid-template-columns:1fr}
    .section.big{grid-column:auto}
    .narr{left:4%;bottom:6%;max-width:88%}
  }
  @media (max-width:600px){
    h1.title{font-size:20px}
    .logo{width:96px;height:96px;font-size:28px}
  }
</style>
</head>
<body>
<div class="stage">

  <!-- INTRO CARD -->
  <div class="introWrap" id="introWrap" role="region" aria-label="Intro card">
    <div style="display:flex;justify-content:space-between;align-items:flex-start">
      <div style="display:flex;gap:20px;align-items:center">
        <div class="logo" id="logo">YG</div>
        <div>
          <h1 class="title" id="titleText">Untuk Yang ‚Äî Selamat Ulang Tahun</h1>
          <div style="color:var(--muted);margin-top:8px">29 November ‚Ä¢ dari yang</div>
        </div>
      </div>
      <div style="text-align:right;color:var(--muted)"><small>Auto movie ‚Ä¢ 1x play</small></div>
    </div>

    <p class="lead" style="margin-top:18px">Nanti akan diputar video pembuka, lalu memori-memori mabar kita akan muncul dalam montage. Duduk santai ‚Äî biar aku urutin jadi film kecil.</p>

    <div class="filmGlow" aria-hidden></div>

    <div class="countdownBox" aria-hidden>
      <div class="num" id="countNum">10</div>
      <div class="hint">Detik sebelum mulai</div>
    </div>
  </div>

  <!-- VIDEO SECTION -->
  <div id="videoSection" aria-hidden>
    <video id="introVideo" playsinline muted preload="auto">
      <source src="assets/intro-placeholder.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="vidOverlay" id="vidOverlay">
      <h2 id="vidTitle">Untuk Yang</h2>
      <p id="vidSub" style="color:var(--muted)">Opening clip</p>
    </div>
  </div>

  <!-- MEMORIES -->
  <div id="memories" aria-hidden>
    <div class="memCard" role="main" aria-label="Memories collage">
      <div class="sections" id="sections">
        <!-- We'll inject 5 sections. Each section contains 2-3 photos (template in JS) -->
      </div>

      <div class="narr" id="narrBox">
        <div class="lead" id="narrLead">Kenangan mabar</div>
        <div class="sub" id="narrSub">Bukan cuma soal game ‚Äî tapi momen kecil yang berasa besar.</div>
      </div>
    </div>
  </div>

  <!-- FINAL -->
  <div class="finalWrap" id="finalWrap" aria-hidden>
    <div class="finalCard">
      <h2>HBD ya om Devit ‚Äî tua looo wkwk üéâ</h2>
      <p>Kurang-kurangin tuh begadangnya. Dah tua, jaga kesehatan ya sayang wk. Lov u ‚ù§Ô∏è</p>
    </div>
  </div>

  <!-- UI fallback -->
  <div class="ui">
    <button class="btn" id="playBgmBtn">Play Music</button>
    <button class="btn" id="skipBtn">Skip to End</button>
  </div>

  <!-- Background music (starts after video finished) -->
  <audio id="bgm" loop preload="auto">
    <source src="assets/bgm-placeholder.mp3" type="audio/mpeg">
  </audio>

</div>

<script>
/* ================= CONFIG ================= */
const CONFIG = {
  countdown: 10,
  // placeholders (replace these with your actual files in assets/)
  introVideo: 'assets/intro-placeholder.mp4',
  bgm: 'assets/bgm-placeholder.mp3',
  // we'll provide 10 photos; JS will map them into 5 sections (some sections contain 2-3 photos)
  photos: [
    'assets/photo1.jpg','assets/photo2.jpg','assets/photo3.jpg','assets/photo4.jpg',
    'assets/photo5.jpg','assets/photo6.jpg','assets/photo7.jpg','assets/photo8.jpg',
    'assets/photo9.jpg','assets/photo10.jpg'
  ],
  // short, not-lebey narratives for each section
  sectionsText: [
    { title:'Pertama ketemu', text:'Awalnya cuma main ‚Äî eh nyambung.' },
    { title:'Momen lucu', text:'Tawa random di map yang bikin hari terang.' },
    { title:'Project kecil', text:'Bikin sesuatu bareng, pelan tapi nyata.' },
    { title:'Call sampai pagi', text:'Jauh jadi dekat karena cerita kecil.' },
    { title:'Doa & Harapan', text:'Semoga langkahmu selalu ringan dan diberkahi.' }
  ],
  // timings (ms)
  introHoldMs: 900, // small hold for intro fade
  sectionDisplay: 6000, // how long each section visible
  transitionMs: 900
};

/* ================= ELEMENTS ================= */
const countEl = document.getElementById('countNum');
const introWrap = document.getElementById('introWrap');
const videoSection = document.getElementById('videoSection');
const introVideo = document.getElementById('introVideo');
const memories = document.getElementById('memories');
const sectionsContainer = document.getElementById('sections');
const narrLead = document.getElementById('narrLead');
const narrSub = document.getElementById('narrSub');
const finalWrap = document.getElementById('finalWrap');
const bgm = document.getElementById('bgm');
const playBgmBtn = document.getElementById('playBgmBtn');
const skipBtn = document.getElementById('skipBtn');

/* assign assets */
introVideo.querySelector('source').src = CONFIG.introVideo;
bgm.querySelector('source').src = CONFIG.bgm;
introVideo.load();
bgm.load();

/* Preload photos quick */
CONFIG.photos.forEach(u => { const i=new Image(); i.src=u; });

/* ========== COUNTDOWN ========== */
let remaining = CONFIG.countdown;
countEl.textContent = remaining;
const tick = setInterval(()=>{
  remaining--;
  countEl.textContent = remaining;
  // subtle animation
  gsap.fromTo('#countNum',{scale:1.08,opacity:0.88},{scale:1,duration:0.35,opacity:1,ease:'power1.out'});
  if(remaining<=0){
    clearInterval(tick);
    launchIntro();
  }
},1000);

/* ========== LAUNCH INTRO VIDEO ========== */
function launchIntro(){
  // animate out intro card
  gsap.to(introWrap, {duration:0.9, y:-30, opacity:0, ease:'power2.in', onComplete: ()=>{ introWrap.style.display='none'; showVideoSection(); }});
}

function showVideoSection(){
  videoSection.style.display='flex';
  gsap.fromTo(videoSection,{opacity:0},{opacity:1,duration:0.9});
  // small overlay reveal
  gsap.to('.vidOverlay',{duration:0.9,opacity:1,delay:0.6});
  // play video muted (autoplay allowed if muted)
  introVideo.muted = true;
  introVideo.play().catch(e => { console.warn('video play blocked',e); });
}

/* when video ends, transition to memories */
introVideo.addEventListener('ended', ()=> {
  // fade out video
  gsap.to(videoSection,{duration:0.9,opacity:0,ease:'power2.in',onComplete:()=>{
    videoSection.style.display='none';
    // now start memories flow
    startMemoriesFlow();
  }});
});

/* allow skip button */
skipBtn.addEventListener('click', ()=>{ // skip entire flow and show final
  // stop video if playing
  try{ introVideo.pause(); introVideo.currentTime = 0; }catch(e){}
  // hide other sections
  videoSection.style.display='none'; introWrap.style.display='none';
  // show memories quickly then final
  startMemoriesFlow(true);
});

/* Play bgm on demand */
playBgmBtn.addEventListener('click', async ()=> {
  if(bgm.paused) { try { await bgm.play(); playBgmBtn.textContent='Pause Music'; } catch(e){ console.warn('bgm play blocked', e);} }
  else { bgm.pause(); playBgmBtn.textContent='Play Music'; }
});

/* ================= MEMORIES FLOW ================= */
function createSections(){
  // We'll create 5 sections. Map photos into them: [0,1] [2,3] [4,5,6] [7,8] [9]
  const mapping = [
    [0,1],
    [2,3],
    [4,5,6],
    [7,8],
    [9]
  ];
  sectionsContainer.innerHTML = '';
  mapping.forEach((idxList,si)=>{
    const sec = document.createElement('div');
    sec.className = 'section';
    if(si===2) sec.classList.add('big'); // middle section a bit special
    // create photo cells inside (some sections have 2 or 3 photos)
    idxList.forEach(i=>{
      const cell = document.createElement('div');
      cell.className = 'photo';
      // random slight rotation to look cinematic (but subtle)
      const r = (Math.random()*5 - 2.5).toFixed(2);
      cell.style.transform = `rotate(${r}deg)`;
      const img = document.createElement('img');
      img.src = CONFIG.photos[i] || '';
      img.alt = 'momen ' + (i+1);
      // small pan initial
      img.style.transform = 'scale(1.05)';
      cell.appendChild(img);
      // decorative border frame
      const fb = document.createElement('div'); fb.className = 'frameBorder'; cell.appendChild(fb);
      sec.appendChild(cell);
    });
    sectionsContainer.appendChild(sec);
  });
}

/* start the memories show */
async function startMemoriesFlow(justFinal=false){
  // build sections
  createSections();
  // show memories area
  memories.style.display = 'flex';
  gsap.fromTo(memories,{opacity:0,y:12},{opacity:1,y:0,duration:0.9,ease:'power2.out'});
  // try starting bgm: many browsers require user interaction, but we'll attempt
  bgm.play().then(()=>{ playBgmBtn.textContent='Pause Music'; }).catch(()=>{ /* blocked until interaction */ });

  // collect section elements
  const secs = Array.from(document.querySelectorAll('.section'));
  if(justFinal){
    // skip all and show final
    setTimeout(()=> showFinal(),400);
    return;
  }

  // sequentially animate sections in cinematic style
  for(let i=0;i<secs.length;i++){
    const s = secs[i];
    // bring focus: subtle reveal with scale/clip
    s.style.opacity = 0;
    gsap.fromTo(s, {opacity:0, scale:0.96, y:8}, {opacity:1, scale:1, y:0, duration:0.9, ease:'power3.out', onStart: ()=>{
      // update narration text for this section
      narrLead.textContent = CONFIG.sectionsText[i].title;
      narrSub.textContent = CONFIG.sectionsText[i].text;
      // animate narr box
      gsap.fromTo('#narrBox',{opacity:0,y:12},{opacity:1,y:0,duration:0.6, ease:'power2.out'});
      // animate each image inside section with slow kenburns and slight stagger
      const imgs = s.querySelectorAll('img');
      imgs.forEach((img,idx)=>{
        const scaleTo = 1.14 + Math.random()*0.04;
        gsap.to(img, {scale: scaleTo, duration: 12 + Math.random()*6, ease:'power1.inOut'});
        // slight entry motion per image
        gsap.fromTo(img, {opacity:0, x: (idx%2?10:-10)}, {opacity:1,x:0,duration:0.9, delay:0.08*idx, ease:'power2.out'});
      });
    }});
    // keep section visible for configured time
    await wait(CONFIG.sectionDisplay);
    // exit animation for this section
    gsap.to(s, {opacity:0, scale:0.98, duration:0.7, ease:'power2.in'});
    // hide narr briefly
    gsap.to('#narrBox',{opacity:0,duration:0.45});
    await wait(200);
  }

  // after all sections -> show final
  showFinal();
}

/* show final card message */
function showFinal(){
  memories.style.display = 'none';
  finalWrap.style.display = 'flex';
  gsap.fromTo(finalWrap,{opacity:0, y:10},{opacity:1,y:0,duration:1.2,ease:'power2.out'});
  // ensure bgm soft
  gsap.to(bgm,{volume:0.6,duration:0.8});
}

/* small util */
function wait(ms){ return new Promise(res=>setTimeout(res,ms)); }

/* ensure audio starts when video ends (try), else fallback to play button */
introVideo.addEventListener('play', ()=> {
  // keep muted
});
introVideo.addEventListener('ended', async ()=> {
  // attempt to unmute/play bgm softly
  try{ await bgm.play(); playBgmBtn.textContent='Pause Music'; }catch(e){ /* likely blocked */ }
});

/* allow one-click to unlock audio in many browsers */
document.addEventListener('click', function unlock(){ bgm.play().then(()=> playBgmBtn.textContent='Pause Music').catch(()=>{}); document.removeEventListener('click', unlock); }, {once:true});

/* start: nothing else to do; countdown will trigger chain */
</script>
</body>
</html>
