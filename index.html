<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Untuk Yang — Film Pendek Ulang Tahun</title>
  <meta name="description" content="Cinematic birthday page untuk Devit — auto-play video intro + slideshow photos dengan narasi lembut." />
  <style>
    :root{
      --bg:#060712;
      --accent:#9be7ff;
      --muted:#9aa8b3;
      --warm:#ffb4c6;
      --film-tone: rgba(0,0,0,0.45);
      --text: #eaf6ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#02030a 0%,#071029 60%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:var(--text)}
    /* frame */
    .stage{position:relative;overflow:hidden;height:100vh;width:100vw;display:flex;align-items:center;justify-content:center}

    /* opening video full screen */
    #intro{position:absolute;inset:0;background:black;display:flex;align-items:center;justify-content:center;z-index:50}
    #intro video{width:100%;height:100%;object-fit:cover}

    /* cinematic overlay for title */
    .overlay{position:absolute;inset:0;z-index:60;display:flex;align-items:flex-end;justify-content:flex-start;padding:5vh 8vw;pointer-events:none}
    .titleCard{backdrop-filter: blur(6px);background:linear-gradient(180deg, rgba(2,6,23,0.25), rgba(2,6,23,0.45));padding:18px 22px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);max-width:720px;opacity:0;transform:translateY(12px);transition:all .9s ease}
    .titleCard.show{opacity:1;transform:translateY(0)}
    .titleCard h1{margin:0;font-size:28px;letter-spacing:0.2px}
    .titleCard p{margin:6px 0 0;color:var(--muted)}

    /* slideshow container */
    #slideshow{position:absolute;inset:0;z-index:40;display:none;align-items:center;justify-content:center}
    .slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none}
    .slide.active{opacity:1;pointer-events:auto}
    .slide img{width:100%;height:100%;object-fit:cover;filter:contrast(.95) saturate(.95)}

    /* ken burns effect */
    .ken{transform-origin:center center;animation:kenburns 18s ease-in-out forwards}
    @keyframes kenburns{0%{transform:scale(1.06) translateY(0)}100%{transform:scale(1.18) translateY(-6px)}}

    /* caption */
    .caption{position:absolute;left:8vw;bottom:10vh;max-width:60vw;background:linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.18));padding:14px 18px;border-radius:10px;color:var(--text);backdrop-filter:blur(4px);opacity:0;transform:translateY(12px);transition:all .6s ease}
    .caption.show{opacity:1;transform:translateY(0)}
    .caption .lead{font-size:18px;line-height:1.5;color:#dff6ff}
    .caption .sub{font-size:13px;color:var(--muted);margin-top:8px}

    /* final card */
    .final{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:70;opacity:0;pointer-events:none}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18));padding:28px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:780px;text-align:center}
    .card h2{margin:0 0 10px;font-size:28px}
    .card p{margin:0;color:var(--muted)}

    /* subtle film grain */
    .grain{pointer-events:none;position:absolute;inset:0;background-image:radial-gradient(ellipse at center, rgba(0,0,0,0.2), transparent 50%);mix-blend-mode:multiply;z-index:80}

    /* small controls (invisible by default) for backup */
    .controls{position:fixed;right:16px;top:16px;z-index:90;display:flex;gap:8px}
    .btn{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--muted);font-size:13px}

    @media (max-width:900px){.caption{left:5vw;right:5vw;max-width:90vw}.titleCard h1{font-size:20px}}
  </style>
</head>
<body>
  <div class="stage" id="stage">

    <!-- Opening video fullscreen (autoplay muted recommended). Replace src with your video file. -->
    <div id="intro">
      <video id="introVid" playsinline muted preload="auto">
        <!-- Replace with your opening video (mp4/webm). Put the file in the repo and use relative path like assets/opening.mp4 -->
        <source src="assets/opening.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="overlay">
        <div class="titleCard" id="titleCard">
          <h1>Untuk Yang — Selamat Ulang Tahun</h1>
          <p>29 November • Dari yang yang sayang</p>
        </div>
      </div>
    </div>

    <!-- Slideshow (hidden until video ends) -->
    <div id="slideshow">
      <!-- Slides will be injected by JS -->
      <div class="caption" id="caption"><div class="lead" id="leadText"></div><div class="sub" id="subText"></div></div>
    </div>

    <div class="final" id="final"><div class="card" id="finalCard"><h2 id="finalTitle">Selamat ulang tahun, Yang.</h2><p id="finalSub">Terima kasih sudah hadir dan bertahan. — Dari yang</p></div></div>

    <div class="grain"></div>

    <div class="controls" aria-hidden>
      <button class="btn" id="playAudio">Play Audio</button>
      <button class="btn" id="skipIntro">Skip Intro</button>
    </div>

    <!-- background music (sentimental modern) - replace with your own file. Autoplay of unmuted audio may be blocked by browsers. We will attempt to play after user interaction or when intro starts (muted video plays allowed). -->
    <audio id="bgm" preload="auto" loop>
      <source src="assets/bgm.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    // ======= Configuration ========
    const slides = [
      { img: 'assets/photo1.jpg', text: 'Waktu pertama kita kenal, aku cuma pengen main — tapi kamu bikin hati tenang.' },
      { img: 'assets/photo2.jpg', text: 'Kamu yang sabar waktu aku masih galau, dan itu mulai nambah rasa aman.' },
      { img: 'assets/photo3.jpg', text: 'Kita bikin project kecil bareng, pelan tapi nyata — belajar sama-sama.' },
      { img: 'assets/photo4.jpg', text: 'Bercanda di map, kamu selalu bisa bikin aku ketawa.' },
      { img: 'assets/photo5.jpg', text: 'Kamu yang nggak banyak drama, tapi selalu ada saat dibutuhkan.' },
      { img: 'assets/photo6.jpg', text: 'Momen kecil yang terasa besar — tidur bareng lewat call saat jauh.' },
      { img: 'assets/photo7.jpg', text: 'Kamu belajar sesuatu untuk project kita — dan aku bangga tiap lihat usahamu.' },
      { img: 'assets/photo8.jpg', text: 'Saat kita saling tolak coba-coba, kamu tetap konsisten dan menghargai.' },
      { img: 'assets/photo9.jpg', text: 'Kamu mengakui aku di depan orang — itu hal kecil yang berarti besar.' },
      { img: 'assets/photo10.jpg', text: 'Untuk hari ini: semoga setiap langkahmu ringan dan penuh berkah.' }
    ];

    const INTRO_VIDEO = document.getElementById('introVid');
    const introWrap = document.getElementById('intro');
    const titleCard = document.getElementById('titleCard');
    const slideshow = document.getElementById('slideshow');
    const caption = document.getElementById('caption');
    const leadText = document.getElementById('leadText');
    const final = document.getElementById('final');
    const finalCard = document.getElementById('finalCard');
    const bgm = document.getElementById('bgm');
    const playAudioBtn = document.getElementById('playAudio');
    const skipIntro = document.getElementById('skipIntro');

    // timings (in ms)
    const introFade = 900; // fade out intro
    const perSlide = 5000; // each slide duration
    const captionDelay = 900; // caption fade in delay

    // helper to create slide elements
    function createSlides(){
      slides.forEach((s,i)=>{
        const slide = document.createElement('div'); slide.className='slide';
        const img = document.createElement('img'); img.src = s.img; img.alt = 'momen '+(i+1);
        img.className='ken';
        slide.appendChild(img);
        slideshow.appendChild(slide);
      });
    }

    // initialize
    createSlides();

    // show title card after short delay
    setTimeout(()=> titleCard.classList.add('show'), 800);

    // attempt to play intro (muted) — this usually allowed
    function startIntro(){
      try{ INTRO_VIDEO.currentTime = 0; INTRO_VIDEO.play(); }catch(e){ console.warn('Intro autoplay blocked', e); }
    }

    // when intro ends -> transition to slideshow
    function onIntroEnd(){
      introWrap.style.transition = `opacity ${introFade}ms ease`; introWrap.style.opacity = 0;
      setTimeout(()=>{ introWrap.style.display='none'; slideshow.style.display='flex'; startSlideshow(); }, introFade);
    }

    INTRO_VIDEO.addEventListener('ended', ()=>{
      // try to start audio gently
      playAudio(); onIntroEnd();
    });

    // allow skipping intro
    skipIntro.addEventListener('click', ()=>{ try{ INTRO_VIDEO.pause(); }catch(e){} playAudio(); onIntroEnd(); });

    // autoplay intro on load
    window.addEventListener('load', ()=>{ startIntro(); });

    // slideshow logic
    async function startSlideshow(){
      const slideEls = Array.from(document.querySelectorAll('.slide'));
      // show first slide immediately
      for(let i=0;i<slideEls.length;i++){
        const el = slideEls[i];
        el.classList.add('active');
        // show caption
        leadText.textContent = slides[i].text; caption.classList.add('show');
        // kenburns restarts by reflow
        const img = el.querySelector('img'); img.style.animation = 'none'; void img.offsetWidth; img.style.animation='kenburns 18s ease-in-out forwards';
        await wait(perSlide);
        // hide caption
        caption.classList.remove('show');
        // fade out
        el.classList.remove('active');
      }
      // show final card
      await wait(400);
      final.style.transition = 'opacity 900ms ease'; final.style.opacity = 1; final.style.pointerEvents='auto';
      // ensure audio continues
    }

    function wait(ms){ return new Promise(resolve=>setTimeout(resolve, ms)); }

    // audio control — browsers block autoplay of unmuted audio; we'll attempt and provide fallback button
    async function playAudio(){
      if(bgm.paused){
        try{ await bgm.play(); playAudioBtn.textContent='Pause Music'; }catch(e){ /* blocked */ playAudioBtn.textContent='Play Music'; }
      }
    }
    playAudioBtn.addEventListener('click', ()=>{ if(bgm.paused) { bgm.play().catch(()=>{}); playAudioBtn.textContent='Pause Music'; } else { bgm.pause(); playAudioBtn.textContent='Play Music'; } });

    // small helper to handle user interaction to enable audio (best effort)
    document.addEventListener('click', function once(){
      if(bgm.paused){ bgm.play().catch(()=>{}); playAudioBtn.textContent = bgm.paused? 'Play Music' : 'Pause Music'; }
      document.removeEventListener('click', once);
    });

    // skip intro via key
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') skipIntro.click(); });

  </script>
</body>
</html>
