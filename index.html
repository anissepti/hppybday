<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Untuk Yang ‚Äî Film Pendek Ulang Tahun</title>
<meta name="description" content="Cinematic birthday: countdown -> intro video -> collage memories -> ending message" />
<!-- GSAP for smooth animations -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<style>
  :root{
    --bg:#070616;
    --muted:#9fb2bf;
    --accent:#ffd6e0; /* soft pink accents */
    --card:#0b1220;
    --glass: rgba(255,255,255,0.03);
    --text:#eaf6ff;
    --white-soft: rgba(255,255,255,0.92);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#03030a 0%,#071029 65%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,Arial;color:var(--text);-webkit-font-smoothing:antialiased;overflow:hidden}

  /* STAGE */
  .stage{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;overflow:hidden}

  /* ---------- INTRO (LANDSCAPE TITLE CARD) ---------- */
  .introWrap{
    width:88vw; max-width:1400px; height:56vw; max-height:820px;
    border-radius:16px;padding:36px;background:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
    box-shadow:0 40px 110px rgba(2,6,23,0.85);border:1px solid rgba(255,255,255,0.03);
    position:relative;overflow:hidden;
  }
  .introTop{display:flex;justify-content:space-between;align-items:flex-start;gap:18px}
  .brand{display:flex;gap:20px;align-items:center}
  .logo{
    width:140px;height:140px;border-radius:14px;background:linear-gradient(135deg,#ffd8e4 0%, #9be7ff 100%);
    display:flex;align-items:center;justify-content:center;font-weight:800;color:#021027;font-size:40px;box-shadow:0 16px 50px rgba(0,0,0,0.6)
  }
  h1.title{font-size:34px;margin:0;letter-spacing:0.2px}
  .meta{color:var(--muted);margin-top:8px}
  p.lead{color:#dff6ff;max-width:60%;margin-top:18px;font-size:16px;line-height:1.5}

  .countdownBox{position:absolute;right:28px;bottom:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.22));padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);text-align:center;min-width:120px}
  .countdownBox .num{font-size:28px;font-weight:800;color:var(--accent)}
  .countdownBox .hint{color:var(--muted);font-size:12px;margin-top:4px}

  /* decorative soft pink bokeh / lope-lope */
  .particleWrap{position:absolute;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:0.9}

  /* ---------- VIDEO (FULLSCREEN) ---------- */
  #videoSection{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:black;z-index:60}
  #introVideo{width:100%;height:100%;object-fit:cover;display:block}
  .vidOverlay{position:absolute;left:6vw;top:6vh;z-index:62;pointer-events:none;opacity:0}
  .vidOverlay h2{margin:0;font-size:26px}
  .vidOverlay p{color:var(--muted);margin-top:6px}

  /* ---------- MEMORIES (COLLAGE / SECTIONS) ---------- */
  #memories{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:50;padding:5vh 5vw}
  .memCard{width:100%;max-width:1280px;height:calc(100vh - 10vh);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.12));border-radius:14px;padding:24px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 90px rgba(2,6,23,0.7);position:relative;overflow:hidden}
  /* 2 columns of sections; each section holds up to 3 photos styled */
  .sections{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:1fr;gap:18px;height:100%}
  .section{background:rgba(2,6,23,0.18);border-radius:12px;padding:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;align-items:stretch;justify-items:stretch;position:relative;overflow:visible}
  .section .photo{position:relative;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#0a0b12;display:flex;align-items:center;justify-content:center}
  .photo img{width:100%;height:100%;object-fit:cover;transition:transform 18s ease}
  .photo .frameBorder{position:absolute;inset:6px;border-radius:8px;border:2px solid rgba(255,255,255,0.02);pointer-events:none}
  .section.big{grid-column:span 2;grid-template-columns:repeat(6,1fr)}
  .narr{position:absolute;left:6%;bottom:6%;background:linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.18));padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);max-width:46%;color:var(--text);backdrop-filter:blur(6px)}
  .narr .lead{font-size:18px;color:#dff6ff;line-height:1.5}
  .narr .sub{font-size:13px;color:var(--muted);margin-top:8px}

  /* small vignette & film grain */
  .vignette{position:absolute;inset:0;pointer-events:none;background:radial-gradient(ellipse at center, rgba(0,0,0,0.08), rgba(0,0,0,0.5));z-index:80}

  /* ---------- FINAL MESSAGE ---------- */
  .finalWrap{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:90}
  .finalCard{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18));padding:28px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:820px;text-align:center;backdrop-filter:blur(6px)}
  .finalCard h2{font-size:34px;margin:0;color:var(--accent)}
  .finalCard p{color:var(--muted);margin-top:10px;line-height:1.6}

  /* UI fallback */
  .ui{position:fixed;right:18px;top:18px;z-index:120;display:flex;gap:8px}
  .btn{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:var(--muted);font-size:13px;cursor:pointer}

  /* responsive */
  @media (max-width:1000px){
    .introWrap{height:66vw}
    .sections{grid-template-columns:1fr}
    .section.big{grid-column:auto}
    .narr{left:4%;bottom:6%;max-width:88%}
  }
  @media (max-width:600px){
    h1.title{font-size:20px}
    .logo{width:96px;height:96px;font-size:28px}
  }
</style>
</head>
<body>
<div class="stage" id="stage">

  <!-- INTRO CARD -->
  <div class="introWrap" id="introWrap" role="region" aria-label="Intro card">
    <div class="introTop">
      <div class="brand">
        <div class="logo" id="logoText">YG</div>
        <div>
          <h1 class="title" id="titleText">Little_Drax7</h1>
          <div class="meta">29 November 1997</div>
        </div>
      </div>
      <div style="text-align:right;color:var(--muted)"><small>Auto movie ‚Ä¢ 1x play</small></div>
    </div>

    <p class="lead">Landscape ya yang kalau mau bagus ‚Äî duduk santai, aku urutin jadi film kecil buat kamu.</p>

    <div class="filmGlow particleWrap" id="particleWrap" aria-hidden></div>

    <div class="countdownBox" aria-hidden>
      <div class="num" id="countNum">10</div>
      <div class="hint">Detik sebelum mulai</div>
    </div>
  </div>

  <!-- VIDEO SECTION -->
  <div id="videoSection" aria-hidden>
    <video id="introVideo" playsinline muted preload="auto">
      <source src="intro.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="vidOverlay" id="vidOverlay">
      <h2 id="vidTitle">Video Transisi</h2>
      <p id="vidSub" style="color:var(--muted)">Nonton dulu jangan di skip</p>
    </div>
  </div>

  <!-- MEMORIES -->
  <div id="memories" aria-hidden>
    <div class="memCard" role="main" aria-label="Memories collage">
      <div class="sections" id="sections">
        <!-- injected by JS (5 sections) -->
      </div>

      <div class="narr" id="narrBox">
        <div class="lead" id="narrLead">Kenangan mabar</div>
        <div class="sub" id="narrSub">Bukan cuma soal game ‚Äî tapi momen kecil yang berasa besar.</div>
      </div>
    </div>
  </div>

  <!-- FINAL -->
  <div class="finalWrap" id="finalWrap" aria-hidden>
    <div class="finalCard">
      <h2>HBD ya om Devit ‚Äî tua looo wkwk üéâ</h2>
      <p>Kurang-kurangin tuh begadangnya. Dah tua, jaga kesehatan ya sayang wk. Lov u ‚ù§Ô∏è</p>
    </div>
  </div>

  <!-- UI fallback -->
  <div class="ui">
    <button class="btn" id="playBgmBtn">Play Music</button>
    <button class="btn" id="skipBtn">Skip to End</button>
  </div>

  <!-- bgm -->
  <audio id="bgm" loop preload="auto">
    <source src="bgm.mp3" type="audio/mpeg">
  </audio>

</div>

<script>
/* ---------- CONFIG ---------- */
const CONFIG = {
  countdown: 10,
  introVideo: 'intro.mp4',
  bgm: 'bgm.mp3',
  photos: [
    'photo1.jpg','photo2.jpg','photo3.jpg',
    'photo4.jpg','photo5.jpg','photo6.jpg',
    'photo7.jpg','photo8.jpg','photo9.jpg','photo10.jpg'
  ],
  // 5 sections; each mapping contains 2-3 photos
  mapping: [
    [0,1],    // section 1: 2 photos
    [2,3],    // section 2: 2 photos
    [4,5,6],  // section 3: 3 photos (big)
    [7,8],    // section 4: 2 photos
    [9]       // section 5: single photo summary
  ],
  sectionsText: [
    {title:'Pertama ketemu', text:'Awalnya cuma main ‚Äî eh nyambung.'},
    {title:'Momen lucu', text:'Tawa receh dan momen yang malah ingat terus.'},
    {title:'Project bareng', text:'Ngerjain project kecil, belajar bareng, nikmat.'},
    {title:'Call & laugh', text:'Sleep call sampai pagi, jauh jadi dekat.'},
    {title:'Harapan', text:'Semoga langkahmu selalu ringan dan diberkahi.'}
  ],
  timings: {
    sectionMs: 6000,
    transitionMs: 900,
    finalDelay: 800
  }
};

/* ---------- ELEMENTS ---------- */
const countEl = document.getElementById('countNum');
const introWrap = document.getElementById('introWrap');
const videoSection = document.getElementById('videoSection');
const introVideo = document.getElementById('introVideo');
const memories = document.getElementById('memories');
const sectionsContainer = document.getElementById('sections');
const narrLead = document.getElementById('narrLead');
const narrSub = document.getElementById('narrSub');
const finalWrap = document.getElementById('finalWrap');
const bgm = document.getElementById('bgm');
const playBgmBtn = document.getElementById('playBgmBtn');
const skipBtn = document.getElementById('skipBtn');
const particleWrap = document.getElementById('particleWrap');

/* assign assets */
introVideo.querySelector('source').src = CONFIG.introVideo;
bgm.querySelector('source').src = CONFIG.bgm;
introVideo.load();
bgm.load();

/* preload photos */
CONFIG.photos.forEach(u=>{ const img=new Image(); img.src=u; });

/* ---------- PARTICLES (lope-lope + soft bokeh) ---------- */
function createParticles(){
  particleWrap.innerHTML = '';
  const count = 28;
  for(let i=0;i<count;i++){
    const p = document.createElement('div');
    p.style.position='absolute';
    const size = Math.random()*36 + 6;
    p.style.width = size+'px';
    p.style.height = size+'px';
    p.style.borderRadius='50%';
    p.style.background = `radial-gradient(circle at 30% 30%, rgba(255,255,255,0.85), rgba(255,255,255,0.06))`;
    // pinkish tint
    p.style.boxShadow = '0 6px 22px rgba(255,180,198,0.12)';
    // random start position
    const left = Math.random()*100;
    const top = Math.random()*100;
    p.style.left = left+'%';
    p.style.top = top+'%';
    p.style.opacity = 0.12 + Math.random()*0.22;
    p.style.transform = `translate(-50%,-50%) scale(${0.7 + Math.random()*0.8})`;
    particleWrap.appendChild(p);
    // animation: slow float
    gsap.to(p, {y:'-='+ (40 + Math.random()*80), x: '+=' + (Math.random()*40-20), duration: 8 + Math.random()*12, repeat:-1, yoyo:true, ease:'sine.inOut', delay: Math.random()*4});
  }
}
createParticles();

/* ---------- COUNTDOWN ---------- */
let remaining = CONFIG.countdown;
countEl.textContent = remaining;
const tick = setInterval(()=>{
  remaining--;
  countEl.textContent = remaining;
  gsap.fromTo('#countNum',{scale:1.06,opacity:0.9},{scale:1,duration:0.35,opacity:1,ease:'power1.out'});
  if(remaining<=0){
    clearInterval(tick);
    startIntro();
  }
},1000);

/* ---------- START INTRO VIDEO ---------- */
function startIntro(){
  // fade out intro card
  gsap.to(introWrap, {duration:0.9, opacity:0, y:-22, ease:'power2.in', onComplete:()=>{
    introWrap.style.display='none';
    showVideo();
  }});
}

function showVideo(){
  videoSection.style.display='flex';
  gsap.fromTo(videoSection, {opacity:0}, {opacity:1, duration:0.9});
  gsap.to('.vidOverlay', {opacity:1, duration:0.9, delay:0.6});
  // play video muted for autoplay allowance
  introVideo.muted = true;
  introVideo.play().catch(e=>{ console.warn('video autoplay blocked', e); });
}

/* skip to final for testing */
skipBtn.addEventListener('click', ()=>{ try{ introVideo.pause(); }catch(e){} transitionToMemories(true); });

/* when video ends -> memories */
introVideo.addEventListener('ended', ()=>{ transitionToMemories(false); });

/* ---------- MEMORIES / SECTIONS ---------- */
function transitionToMemories(skipAll=false){
  // fade video out
  gsap.to(videoSection, {duration:0.9, opacity:0, ease:'power2.in', onComplete: ()=>{
    videoSection.style.display='none';
    if(skipAll) { showFinal(); return; }
    startMemories();
  }});
}

function createSections(){
  const mapping = CONFIG.mapping;
  sectionsContainer.innerHTML = '';
  mapping.forEach((arr,si)=>{
    const sec = document.createElement('div');
    sec.className = 'section';
    if(si===2) sec.classList.add('big'); // middle big section
    // for each photo index, create a photo element
    arr.forEach(idx=>{
      const cell = document.createElement('div');
      cell.className = 'photo';
      // subtle rotation
      const r = (Math.random()*5 - 2.5).toFixed(2);
      cell.style.transform = `rotate(${r}deg)`;
      const img = document.createElement('img');
      img.src = CONFIG.photos[idx] || '';
      img.alt = 'momen ' + (idx+1);
      // initial tiny scale for ken burns
      img.style.transform = 'scale(1.03)';
      cell.appendChild(img);
      const fb = document.createElement('div');
      fb.className = 'frameBorder';
      cell.appendChild(fb);
      sec.appendChild(cell);
    });
    sectionsContainer.appendChild(sec);
  });
}

async function startMemories(){
  createSections();
  // show memories wrapper
  memories.style.display='flex';
  gsap.fromTo(memories, {opacity:0, y:12}, {opacity:1, y:0, duration:0.9, ease:'power2.out'});
  // try start bgm (may be blocked until interaction)
  bgm.play().then(()=>{ playBgmBtn.textContent='Pause Music'; }).catch(()=>{ /* blocked */ });

  // animate each section sequentially
  const secs = Array.from(document.querySelectorAll('.section'));
  for(let i=0;i<secs.length;i++){
    const s = secs[i];
    // reveal with cinematic mask + slight zoom
    s.style.opacity = 0;
    await revealSection(s, i);
    // wait duration
    await wait(CONFIG.timings.sectionMs);
    // hide section
    gsap.to(s, {duration:0.7, opacity:0, scale:0.98, ease:'power2.in'});
    // hide narration slightly
    gsap.to('#narrBox', {duration:0.4, opacity:0, y:8});
    await wait(220);
  }

  // show final
  showFinal();
}

function revealSection(sectionEl, index){
  return new Promise(resolve=>{
    // bring section in
    gsap.fromTo(sectionEl, {opacity:0, y:10, scale:0.98}, {opacity:1, y:0, scale:1, duration:0.92, ease:'power3.out', onStart:()=>{
      // set narration
      const txt = CONFIG.sectionsText[index] || {title:'', text:''};
      narrLead.textContent = txt.title;
      narrSub.textContent = txt.text;
      gsap.fromTo('#narrBox', {opacity:0, y:12}, {opacity:1, y:0, duration:0.55, ease:'power2.out'});
      // animate each image inside with staggered entry and Ken Burns long zoom
      const imgs = sectionEl.querySelectorAll('img');
      imgs.forEach((img,idx)=>{
        // entry
        gsap.fromTo(img, {opacity:0, x: (idx%2? 18 : -18)}, {opacity:1, x:0, duration:0.9, delay: 0.08*idx, ease:'power2.out'});
        // long gentle zoom/pan
        const endScale = 1.12 + Math.random()*0.06;
        gsap.to(img, {scale: endScale, duration: 14 + Math.random()*6, ease:'sine.inOut'});
      });
    }, onComplete: resolve});
  });
}

/* ---------- FINAL ---------- */
function showFinal(){
  memories.style.display = 'none';
  finalWrap.style.display = 'flex';
  gsap.fromTo(finalWrap, {opacity:0, y:10}, {opacity:1, y:0, duration:1.1, ease:'power2.out'});
  // gently reduce bgm volume
  gsap.to(bgm, {duration:2.2, volume:0.5});
}

/* ---------- HELPERS ---------- */
function wait(ms){ return new Promise(res=>setTimeout(res,ms)); }

/* Play/pause BGM button */
playBgmBtn.addEventListener('click', async ()=>{
  if(bgm.paused){ try{ await bgm.play(); playBgmBtn.textContent='Pause Music'; }catch(e){ console.warn(e); } }
  else { bgm.pause(); playBgmBtn.textContent='Play Music'; }
});

/* unlock audio on first user interaction (help browsers that block autoplay) */
document.addEventListener('click', function unlock(){ bgm.play().then(()=> playBgmBtn.textContent='Pause Music').catch(()=>{}); document.removeEventListener('click', unlock); }, {once:true});

/* start background preloads and small tweaks */
(function init(){
  // prevent accidental scrolling
  document.addEventListener('wheel', e=> e.preventDefault(), {passive:false});
  // prewarm layout
  createSections(); // optional; will be re-created during flow
})();
</script>
</body>
</html>
