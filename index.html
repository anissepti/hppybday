<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Untuk Kamu â€” Spesial Ulang Tahun ğŸ‚</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<style>
  :root{
    --accent:#ffcce0;
    --muted:#a4b8cc;
    --text:#f6f9ff;
    --bg:#060616;
  }
  html,body{
    height:100%;margin:0;overflow:hidden;
    font-family:'Inter',sans-serif;
    background:linear-gradient(180deg,#050517 0%,#0c132b 65%);
    color:var(--text);
    display:flex;align-items:center;justify-content:center;
  }

  .introWrap{text-align:center;}
  #countNum{font-size:100px;font-weight:900;color:var(--accent);margin:0;}
  #countText{font-size:18px;color:var(--muted);margin-top:10px;}

  #videoSection{
    display:none;
    position:fixed;inset:0;
    background:rgba(0,0,0,0.85);
    justify-content:center;align-items:center;
  }
  .videoContainer{
    width:90%;
    max-width:600px;
    aspect-ratio:16/9;
    overflow:hidden;
    border-radius:20px;
    box-shadow:0 0 25px rgba(255,200,220,0.4);
  }
  #introVideo{
    width:100%;height:100%;object-fit:cover;
    display:block;border-radius:20px;
  }

  .finalwrap{
    display:none;
    position:fixed;inset:0;
    justify-content:center;align-items:center;
    background:linear-gradient(180deg,rgba(0,0,0,0.7),rgba(0,0,0,0.9));
    text-align:center;
  }
  .finalCard h2{color:var(--accent);font-size:30px;margin:0;}
  .finalCard p{color:var(--muted);font-size:16px;margin-top:10px;}
</style>
</head>
<body>

<!-- COUNTDOWN -->
<div class="introWrap" id="introWrap">
  <div id="countNum">3</div>
  <div id="countText">(tap layarnya dulu ya )</div>
</div>

<!-- VIDEO -->
<div id="videoSection">
  <div class="videoContainer">
   <video id="introVideo" playsinline preload="auto">
      <source src="intro.mp4" type="video/mp4" />
    </video>
  </div>
</div>
<div id="loadingOverlay" style="
  display:none;
  position:fixed;inset:0;
  background:black;
  color:white;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-family:'Inter',sans-serif;
  z-index:9999;">
  <div id="loadingText" style="margin-bottom:15px;">Loading sabar yang...</div>
  <div style="width:70%;height:10px;background:#222;border-radius:5px;overflow:hidden;">
    <div id="progressBar" style="width:0%;height:100%;background:#ffb3d9;transition:width 0.2s;"></div>
  </div>
</div>
 
<!-- FINAL SLIDES -->
<div id="finalWrap" class="finalwrap">
  <div class="finalCard">
    <h2>HBD ya om Devit, tua loo ahaha ğŸ‰</h2>
    <p>Ciee yang terharu abis nonton cinematic wkwk</p>
  </div>
</div>

<div id="finalWrap2" class="finalwrap">
  <div class="finalCard">
    <h2>Kurang-kurangin tuh begadangnya. ğŸ¥¹</h2>
    <p>jaga kesehatan ya. jangan sampai sakit ultramen penjaga buminya </p>
  </div>
</div>

<div id="finalWrap3" class="finalwrap">
  <div class="finalCard">
    <h2>Tetap jadi kamu</h2>
    <p>yang kadang ngeselin, nyebelin tapi ada sisi manisnya ğŸ’« (hueekk kok mual ya)</p>
  </div>
</div>

<div id="finalWrap4" class="finalwrap">
  <div class="finalCard">
    <h2>Doaku buat yg lagi hbd ğŸ¤</h2>
    <p>semoga semua langkahmu dipermudah, rezekimu dilancarkan, dan hatimu selalu tenang</p>
  </div>
</div>

<div id="finalWrap5" class="finalwrap">
  <div class="finalCard">
    <h2>love u ğŸ’•</h2>
    <p>geliiii sumpah</p>
  </div>
</div>
  
<!-- AUDIO COUNTDOWN -->
<audio id="countAudio" preload="auto">
  <source src="song.mp3" type="audio/mpeg">
</audio>

<script>const introWrap = document.getElementById('introWrap');
const countNum = document.getElementById('countNum');
const videoSection = document.getElementById('videoSection');
const introVideo = document.getElementById('introVideo');
const countAudio = document.getElementById('countAudio');
const loadingOverlay = document.getElementById('loadingOverlay');
const progressBar = document.getElementById('progressBar');
const loadingText = document.getElementById('loadingText');

const finalSlides = [
  document.getElementById('finalWrap'),
  document.getElementById('finalWrap2'),
  document.getElementById('finalWrap3'),
  document.getElementById('finalWrap4'),
  document.getElementById('finalWrap5')
];

document.body.addEventListener('click', startCountdown, { once:true });

function startCountdown(){
  runCountdown();
}

function runCountdown(){
  let remaining = 3;
  countNum.textContent = remaining;
  const tick = setInterval(()=>{
    remaining--;
    if(remaining >= 0){
      gsap.fromTo(countNum,{scale:1.2,opacity:0.3},{scale:1,duration:0.6,opacity:1,ease:'power2.out'});
      countNum.textContent = remaining;
    }
    if(remaining <= 0){
      clearInterval(tick);
      startVideo();
    }
  },1000);
}

function startVideo(){
  gsap.to(introWrap,{opacity:0,duration:0.8,onComplete:()=>{
    introWrap.style.display='none';
    videoSection.style.display='flex';
    gsap.fromTo(videoSection,{opacity:0},{opacity:1,duration:1});
    showLoading();

    introVideo.load();
    introVideo.addEventListener('canplaythrough', () => {
      hideLoading();
      introVideo.play().catch(e=>console.warn(e));
    }, { once:true });
  }});
}

// âœ… Progress bar update
introVideo.addEventListener('progress', ()=>{
  if (introVideo.buffered.length > 0 && introVideo.duration > 0) {
    const bufferedEnd = introVideo.buffered.end(introVideo.buffered.length - 1);
    const percent = (bufferedEnd / introVideo.duration) * 100;
    progressBar.style.width = percent + '%';
    loadingText.textContent = `Loading video... ${Math.round(percent)}%`;
  }
});

introVideo.addEventListener('waiting', showLoading);
introVideo.addEventListener('playing', hideLoading);

introVideo.addEventListener('ended', ()=>{
  gsap.to(videoSection,{opacity:0,duration:1,onComplete:()=>{
    videoSection.style.display='none';
    countAudio.currentTime = 0;
    countAudio.play().catch(e => console.warn(e));
    playFinalSlides(0);
  }});
});

function showLoading(){
  loadingOverlay.style.display = 'flex';
  progressBar.style.width = '0%';
  loadingText.textContent = 'Loading video...';
}

function hideLoading(){
  loadingOverlay.style.display = 'none';
}

function playFinalSlides(index){
  if(index >= finalSlides.length) return;
  const slide = finalSlides[index];
  slide.style.display='flex';
  gsap.fromTo(slide,{opacity:0},{opacity:1,duration:1});
  setTimeout(()=>{
    gsap.to(slide,{opacity:0,duration:1,onComplete:()=>{
      slide.style.display='none';
      playFinalSlides(index+1);
    }});
  },6000);
}

</script>
</body>
</html>
